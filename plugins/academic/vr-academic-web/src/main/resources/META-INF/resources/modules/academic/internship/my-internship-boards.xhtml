<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.

and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"

        >

<h:head>
</h:head>

<h:body>


    <ui:composition template="#{vr.themePath}/templates/private-template.xhtml">
        <ui:define name="content">
            <h:form id="listForm">
                <p:messages id="currentMessages"/>
                <ui:fragment rendered="#{myInternshipBoardsCtrl.model.list}">

                    <div >
                        <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.boardId}" style="margin-bottom: 20px;">
                            <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateBoard}" update=":listForm"/>
                            <f:selectItem itemLabel="Selectionner Comité..." itemValue=""/>
                            <f:selectItems value="#{myInternshipBoardsCtrl.model.boards}"/>
                        </p:selectOneMenu>
                        <p:selectOneMenu rendered="#{myInternshipBoardsCtrl.model.filterInternshipTypeVisible}"
                                         value="#{myInternshipBoardsCtrl.model.filterInternshipTypeId}"
                                         style="margin-bottom: 20px;margin-left: 20px;">
                            <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateBoard}" update=":listForm"/>
                            <f:selectItem itemLabel="Selectionner Type Stage..." itemValue=""/>
                            <f:selectItems value="#{myInternshipBoardsCtrl.model.internshipTypes}"/>
                        </p:selectOneMenu>
                    </div>

                    <p:tabView>
                        <p:tab title="Stages">
                            <div class="row">
                                <p:dataTable id="listTable" var="i"
                                             value="#{myInternshipBoardsCtrl.model.internshipInfos}"
                                             class="table table-bordered table-hover"
                                             paginatorAlwaysVisible="false"
                                             paginator="true"
                                             paginatorPosition="bottom"
                                             emptyMessage="Aucun stage"
                                             rows="20"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="20,50,100,200,1000"

                                        >

                                    <!--                                    <f:facet name="header">
                                                                            List
                                                                            <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="ui-icon-calculator" />
                                                                            <p:columnToggler datasource="cars" trigger="toggler" />
                                                                        </f:facet>-->
                                    <p:column headerText="Code"
                                              sortBy="#{i.internship.code}"
                                              style="border-left: 0px !important;border-right: 0px !important;width: 5%;">
                                        <p:outputLabel value="#{vr.strcut(i.internship.code, 20)}"/>
                                    </p:column>
                                    <p:column headerText="Intitulé"
                                              sortBy="#{i.internship.name}"
                                              style="border-left: 0px !important;width: 25%;">
                                        <p:commandLink ajax="true"
                                                       actionListener="#{myInternshipBoardsCtrl.onSelectInternship(i.internship)}"
                                                       update=":listForm"
                                                       value="#{vr.strexpand(vr.strcut(i.internship.name, 150),'.',3)}">
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="Elève Ing" style="width: 10%;"
                                              sortBy="#{i.internship.student.contact.fullName}"
                                            >
                                        <p:outputLabel value="#{i.internship.student.contact.fullName}"/>
                                    </p:column>
                                    <p:column headerText="Entreprise" style="width: 10%;"
                                              sortBy="#{i.internship.company.name}"
                                            >
                                        <p:outputLabel
                                                value="#{vr.strcatsep(' - ',i.internship.company.name ,i.internship.company.country.name,i.internship.companyOther)}">
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Encadrant" style="width: 10%;"
                                              sortBy="#{i.supervisorInfo}"
                                            >
                                        <p:outputLabel value="#{i.supervisorInfo}">
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Durée" style="width: 10%;"
                                              sortBy="#{i.internship.duration.name}"
                                            >
                                        <p:outputLabel value="#{i.internship.duration.name}">
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Disciplines" style="width: 10%;"
                                              sortBy="#{i.internship.mainDiscipline}"
                                            >
                                        <p:outputLabel value="#{i.internship.mainDiscipline}">
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Variante" style="width: 10%;"
                                              sortBy="#{i.internship.internshipVariant.name}"
                                            >
                                        <p:outputLabel value="#{i.internship.internshipVariant.name}">
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Etape" style="width: 10%;font-size: smaller;"
                                              sortBy="#{i.internship.internshipStatus.name}"
                                            >
                                        <p:outputLabel value="#{i.internship.internshipStatus.name}"/>
                                    </p:column>
                                    <p:column headerText="" style="width: 10%;">
                                        <f:facet name="header">
                                            <h:outputLink id="content" value="#">
                                                <h:outputText value="Validité"/>
                                            </h:outputLink>
                                            <p:tooltip id="toolTipContent" for="content">
                                                <table>
                                                    <tr>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Intitulé</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Description</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Variante</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Entreprise</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Encad Entr</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Contacts Encad</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Contact Entr</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Discp/Tehno</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Dates</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Rapport Spec</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Rapport 1/2</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Rapport Final</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">.</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Encad.</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Pres. Jury</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Rapp. Jury</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Date Sout.</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">Salle Sout.</td>
                                                        <td style="border: 1px solid var(--vr-color-main14); padding: 2px;">.</td>
                                                    </tr>
                                                </table>
                                            </p:tooltip>
                                        </f:facet>
                                        <p:dataTable styleClass="" value="#{i.flags}" var="f"
                                                     class="table table-bordered hide-column-names"
                                                >
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(0) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(0) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(0) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(1) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(1) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(1) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(2) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(2) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(2) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(3) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(3) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(3) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(4) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(4) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(4) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <p:column
                                                    style="padding: 0; width: 5px; height: 5px; #{(f.get(5) eq 2) ? 'background-color: var(--vr-color-invalid3);' : (f.get(5) eq 1) ? 'background-color: var(--vr-color-warn3);' : (f.get(5) eq 0) ? 'background-color: var(--vr-color-valid3);':'background-color: grey;'}">
                                            </p:column>
                                            <!--                                    <p:columns value="# {f}" var="c" style="# {(c eq 2) ? 'background-color: red;' : (c eq 1) ? 'background-color: orange;' : (c eq 0) ? 'background-color: green;':'background-color: grey;'}">
                                                                                    <p:outputLabel value="i"/>
                                                                                </p:columns>-->
                                        </p:dataTable>
                                    </p:column>
                                    <f:facet name="footer">
                                        <p:outputLabel
                                                value="Total #{myInternshipBoardsCtrl.model.internships.size()}"/>
                                    </f:facet>
                                </p:dataTable>

                            </div>
                        </p:tab>
                        <p:tab title="Discussions">
                            <div class="row">
                                <p:dataTable id="messagesTable" var="i"
                                             value="#{myInternshipBoardsCtrl.model.internshipExtList.messages}"
                                             class="table table-bordered table-hover"
                                             paginatorAlwaysVisible="false"
                                             paginator="true"
                                             paginatorPosition="bottom"
                                             emptyMessage="Aucun Message"
                                             rows="20"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="20,50,100,200,1000"

                                        >

                                    <!--                                    <f:facet name="header">
                                                                            List
                                                                            <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="ui-icon-calculator" />
                                                                            <p:columnToggler datasource="cars" trigger="toggler" />
                                                                        </f:facet>-->
                                    <p:column headerText="Date"
                                              sortBy="#{i.obsUpdateDate}"
                                              style="width: 10%;">
                                        <p:outputLabel value="#{vr.date(i.obsUpdateDate)}"/>
                                    </p:column>
                                    <p:column headerText="PFE"
                                              sortBy="#{i.internship.code}"
                                              style="width: 5%;">
                                        <p:outputLabel value="#{i.internship.code}"/>
                                    </p:column>
                                    <p:column headerText="PFE"
                                              sortBy="#{i.internship.name}"
                                              style="width: 35%;">
                                        <p:commandLink ajax="true"
                                                       actionListener="#{myInternshipBoardsCtrl.onSelectInternship(i.internship)}"
                                                       update=":listForm"
                                                       value="#{vr.strexpand(vr.strcut(i.internship.name, 150),'.',3)}">
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="Etud."
                                              sortBy="#{i.internship.student.contact.fullName}"
                                              style="width: 10%;">
                                        <p:outputLabel value="#{i.internship.student.contact.fullName}"/>
                                    </p:column>
                                    <p:column headerText="Ens."
                                              sortBy="#{i.boardTeacher.teacher.contact.fullName}"
                                              style="width: 10%;">
                                        <p:outputLabel value="#{i.boardTeacher.teacher.contact.fullName}"/>
                                    </p:column>
                                    <p:column headerText="Msg"
                                              sortBy="#{i.privateObservations}"
                                              style="width: 30%;">
                                        <p:outputLabel value="#{i.privateObservations}"/>
                                    </p:column>
                                </p:dataTable>

                            </div>
                        </p:tab>
                        <p:tab title="Encadrements">
                            <div class="row">
                                <p:dataTable id="internTable" var="i"
                                             value="#{myInternshipBoardsCtrl.model.academicInternshipCounts}"
                                             class="table table-bordered table-hover"
                                             paginatorAlwaysVisible="false"
                                             paginator="true"
                                             paginatorPosition="bottom"
                                             emptyMessage="Aucun Encadrement"
                                             rows="20"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="20,50,100,200,1000"

                                        >

                                    <!--                                    <f:facet name="header">
                                                                            List
                                                                            <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="ui-icon-calculator" />
                                                                            <p:columnToggler datasource="cars" trigger="toggler" />
                                                                        </f:facet>-->
                                    <p:column headerText="Enseignant"
                                              sortBy="#{i.teacherName}"
                                              style="width: 80%;">
                                        <p:outputLabel value="#{i.teacherName}"/>
                                    </p:column>
                                    <p:column headerText="Stages"
                                              sortBy="#{i.count}"
                                              style="width: 20%;">
                                        <p:outputLabel value="#{i.count}"/>
                                    </p:column>
                                </p:dataTable>

                            </div>
                        </p:tab>
                    </p:tabView>

                </ui:fragment>
                <ui:fragment rendered="#{! myInternshipBoardsCtrl.model.list}">

                    <div class="row" style="margin-top: 20px;">
                        <div class="table-responsive">
                            <p:tabView rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                <p:tab title="Général">
                                    <p:panelGrid id="reports" styleClass="vr-no-border-grid"
                                                 style="border-style: none;border-width: 0px;">
                                        <p:row>
                                            <p:column><p:outputLabel value="Elève"/></p:column>
                                            <p:column colspan="2"><p:outputLabel style="width: 100%"
                                                                                 value="#{myInternshipBoardsCtrl.model.internship.student.contact.fullName}"/></p:column>
                                            <p:column colspan="1"><p:outputLabel style="width: 100%"
                                                                                 value="#{myInternshipBoardsCtrl.model.internship.secondStudent.contact.fullName}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Intitulé"/></p:column>
                                            <p:column colspan="3"><p:inputText style="width: 100%"
                                                                               value="#{myInternshipBoardsCtrl.model.internship.name}"
                                                                               disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:inputTextarea rows="10" style="width: 100%"
                                                                                   value="#{myInternshipBoardsCtrl.model.internship.description}"
                                                                                   disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Phase"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu
                                                        value="#{myInternshipBoardsCtrl.model.internshipStatusId}"
                                                        disabled="#{!myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateInternshipStatus}"
                                                            update="reports"/>
                                                    <f:selectItem itemLabel="Selectionner..." itemValue=""/>
                                                    <f:selectItems
                                                            value="#{myInternshipBoardsCtrl.model.internshipStatuses}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                            <p:column><p:outputLabel value="Code"/></p:column>
                                            <p:column><p:outputLabel
                                                    value="#{myInternshipBoardsCtrl.model.internship.code}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Entreprise"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.companyId}"
                                                                 disabled="#{
                                                                     !myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr
                                                                         or !myInternshipBoardsCtrl.model.boardManager
                                                                 }">
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateCompany}"/>
                                                    <f:selectItem itemLabel="Selectionner Entreprise..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.companies}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                            <p:column><p:outputLabel value="Autre"/></p:column>
                                            <p:column><p:inputText
                                                    value="#{myInternshipBoardsCtrl.model.internship.companyOther}"
                                                    disabled="#{
                                                                                 !myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr
                                                                                 or !myInternshipBoardsCtrl.model.boardManager
                                                        }"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Encadrant Entreprise"/></p:column>
                                            <p:column colspan="2"><p:inputText style="width: 100%"
                                                                               value="#{myInternshipBoardsCtrl.model.internship.companyMentorOther}"
                                                                               disabled="#{
                                                                                     !myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr
                                                                                         or !myInternshipBoardsCtrl.model.boardManager
                                                }"/></p:column>
                                            <p:column><p:outputLabel
                                                    value="#{myInternshipBoardsCtrl.model.internship.companyMentor eq null? '' : myInternshipBoardsCtrl.model.internship.companyMentor.fullName}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Email"/></p:column>
                                            <p:column><p:inputText style="width: 100%"
                                                                   value="#{myInternshipBoardsCtrl.model.internship.companyMentorOtherEmail}"
                                                                   disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"/></p:column>
                                            <p:column><p:outputLabel value="Téléphone"/></p:column>
                                            <p:column><p:inputText style="width: 100%"
                                                                   value="#{myInternshipBoardsCtrl.model.internship.companyMentorOtherPhone}"
                                                                   disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Discipline"/></p:column>
                                            <p:column colspan="3">
                                                <p:inputText id="mainDiscipline" style="width: 90%;"
                                                             value="#{myInternshipBoardsCtrl.model.internship.mainDiscipline}"
                                                             disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        />
                                                <p:commandButton
                                                        style="width:5%;padding-top: 8px; margin-bottom: 3px; margin-left: 1px; padding-bottom: 8px;"
                                                        ajax="true" value=""
                                                        icon="fa fa-tags"
                                                        actionListener="#{myInternshipBoardsCtrl.openDisciplineDialog}"
                                                        disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax event="dialogReturn"
                                                            listener="#{myInternshipBoardsCtrl.onDisciplineDialogClosed}"
                                                            update="mainDiscipline"/>
                                                </p:commandButton>

                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Technologies"/></p:column>
                                            <p:column colspan="3"><p:inputText style="width: 100%"
                                                                               value="#{myInternshipBoardsCtrl.model.internship.technologies}"
                                                                               disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                    /></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Type"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.typeVariantId}"
                                                                 disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateVariant}"/>
                                                    <f:selectItem itemLabel="Selectionner Type..." itemValue=""/>
                                                    <f:selectItems
                                                            value="#{myInternshipBoardsCtrl.model.typeVariants}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                            <p:column><p:outputLabel value="Durée"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.durationId}"
                                                                 disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateDuration}"/>
                                                    <f:selectItem itemLabel="Selectionner Durée..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.durations}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column><p:outputLabel value="Le stage commence "/></p:column>
                                            <p:column>
                                                <p:calendar value="#{myInternshipBoardsCtrl.model.internship.startDate}"
                                                            disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        />
                                            </p:column>
                                            <p:column><p:outputLabel value="Et se termine "/></p:column>
                                            <p:column>
                                                <p:calendar value="#{myInternshipBoardsCtrl.model.internship.endDate}"
                                                            disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesDescr or !myInternshipBoardsCtrl.model.boardManager}"
                                                        />
                                            </p:column>
                                        </p:row>

                                        <p:row>
                                            <p:column><p:outputLabel value="Encadrement Ecole"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.supervisor1Id}"
                                                                 disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesSupervisors or !myInternshipBoardsCtrl.model.boardManager}">
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateSupervisor}"/>
                                                    <f:selectItem itemLabel="Selectionner Encadrement..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.teachers}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                            <p:column>
                                                <p:selectOneMenu
                                                        rendered="#{myInternshipBoardsCtrl.model.internship.board.multipleSupervisors}"
                                                        value="#{myInternshipBoardsCtrl.model.supervisor2Id}"
                                                        disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesSupervisors or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateSupervisor}"/>
                                                    <f:selectItem itemLabel="Selectionner Encadrement 2..."
                                                                  itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.teachers}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Cahier des charges"/></p:column>
                                            <p:column>
                                                <p:outputLabel
                                                        rendered="#{vr.isEmpty(myInternshipBoardsCtrl.model.internship.specFilePath)}"
                                                        value="Non soumis"/>
                                                <p:commandLink
                                                        rendered="#{!vr.isEmpty(myInternshipBoardsCtrl.model.internship.specFilePath)}"
                                                        value="télécharger"
                                                        ajax="false"
                                                        >
                                                    <p:fileDownload
                                                            value="#{myInternshipBoardsCtrl.download('report1')}"/>
                                                </p:commandLink>
                                            </p:column>
                                            <p:column>

                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Rapport mis parcours"/></p:column>
                                            <p:column>
                                                <p:outputLabel
                                                        rendered="#{vr.isEmpty(myInternshipBoardsCtrl.model.internship.midTermReportFilePath)}"
                                                        value="Non soumis"/>
                                                <p:commandLink
                                                        rendered="#{!vr.isEmpty(myInternshipBoardsCtrl.model.internship.midTermReportFilePath)}"
                                                        value="télécharger"
                                                        ajax="false"
                                                        >
                                                    <p:fileDownload
                                                            value="#{myInternshipBoardsCtrl.download('report2')}"/>
                                                </p:commandLink>
                                            </p:column>
                                            <p:column>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Rapport final"/></p:column>
                                            <p:column>
                                                <p:outputLabel
                                                        rendered="#{vr.isEmpty(myInternshipBoardsCtrl.model.internship.reportFilePath)}"
                                                        value="Non soumis"/>
                                                <p:commandLink
                                                        rendered="#{!vr.isEmpty(myInternshipBoardsCtrl.model.internship.reportFilePath)}"
                                                        value="télécharger"
                                                        ajax="false"
                                                        >
                                                    <p:fileDownload
                                                            value="#{myInternshipBoardsCtrl.download('report3')}"/>
                                                </p:commandLink>
                                            </p:column>
                                            <p:column>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Date Soutenance"/></p:column>
                                            <p:column>
                                                <p:outputLabel
                                                        value="#{myInternshipBoardsCtrl.model.internship.examDate eq null ? 'N/A': vr.date(myInternshipBoardsCtrl.model.internship.examDate,'yyyy-MM-dd HH:mm')}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Salle"/></p:column>
                                            <p:column>
                                                <p:outputLabel
                                                        value="#{myInternshipBoardsCtrl.model.internship.examLocation}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="President"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.chairExaminerId}"
                                                                 disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesEvaluators or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateChairExaminer}"/>
                                                    <f:selectItem itemLabel="Selectionner..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.teachers}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Rapporteur"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu value="#{myInternshipBoardsCtrl.model.firstExaminerId}"
                                                                 disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesEvaluators or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateFirstExaminer}"/>
                                                    <f:selectItem itemLabel="Selectionner..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.teachers}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                        <p:row rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                            <p:column><p:outputLabel value="Examinateur"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu
                                                        value="#{myInternshipBoardsCtrl.model.secondExaminerId}"
                                                        disabled="#{!myInternshipBoardsCtrl.model.internship.internshipStatus.boardUpdatesEvaluators or !myInternshipBoardsCtrl.model.boardManager}"
                                                        >
                                                    <p:ajax listener="#{myInternshipBoardsCtrl.onUpdateSecondExaminer}"/>
                                                    <f:selectItem itemLabel="Selectionner..." itemValue=""/>
                                                    <f:selectItems value="#{myInternshipBoardsCtrl.model.teachers}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>

                                    <div class="row" style="margin-top: 20px;margin-left: 20%;">
                                        <div class="table-responsive">
                                            <p:commandButton
                                                    rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                    value="Enregistrer" action="#{myInternshipBoardsCtrl.onSave}"
                                                    update=":listForm:currentMessages"/>
                                            <p:commandButton style="margin-left: 10px;"
                                                             rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                             value="Fermer" action="#{myInternshipBoardsCtrl.onClose}"
                                                             update=":listForm"/>
                                        </div>
                                    </div>
                                </p:tab>
                                <p:tab title="Observations"
                                       rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                    <p:panelGrid styleClass="vr-no-border-grid"
                                                 rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                 style="border-style: none;border-width: 0px;width: 100%;">
                                        <p:row>
                                            <p:column colspan="4"><p:outputLabel value="Remarques Etudiant"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:inputTextarea
                                                    rows="10" style="width: 100%"
                                                    value="#{myInternshipBoardsCtrl.model.internship.studentObservations}"
                                                    disabled="true"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:outputLabel
                                                    value="Remarques Administratives"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:inputTextarea rows="10" style="width: 100%"
                                                                                   value="#{myInternshipBoardsCtrl.model.internship.validationObservations}"
                                                                                   disabled="#{!myInternshipBoardsCtrl.model.boardManager}"
                                                    /></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:outputLabel value="Evaluation"/></p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:inputTextarea rows="10" style="width: 100%"
                                                                                   value="#{myInternshipBoardsCtrl.model.internship.evaluationObservations}"
                                                                                   disabled="#{!myInternshipBoardsCtrl.model.boardManager}"
                                                    /></p:column>
                                        </p:row>
                                    </p:panelGrid>

                                    <div class="row" style="margin-top: 20px;margin-left: 20%;">
                                        <div class="table-responsive">
                                            <p:commandButton
                                                    rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                    value="Enregistrer" action="#{myInternshipBoardsCtrl.onSave}"
                                                    update=":listForm:currentMessages"/>
                                            <p:commandButton style="margin-left: 10px;"
                                                             rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                             value="Fermer" action="#{myInternshipBoardsCtrl.onClose}"
                                                             update=":listForm"/>
                                        </div>
                                    </div>

                                </p:tab>
                                <p:tab title="Discussion" rendered="#{myInternshipBoardsCtrl.model.internship ne null}">
                                    <p:panelGrid styleClass="vr-no-border-grid"
                                                 rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                 style="border-style: none;border-width: 0px;width: 100%;">
                                        <p:row>
                                            <p:column colspan="4">
                                                <p:outputLabel value="Ajouter Message"/>
                                                <p:commandButton style="margin-left: 5px;" value="+"
                                                                 action="#{myInternshipBoardsCtrl.onAddNewMessage}"
                                                                 update="listMessages newMessageText"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4"><p:inputTextarea id="newMessageText" rows="4"
                                                                                   style="width: 100%"
                                                                                   value="#{myInternshipBoardsCtrl.model.newMessage}"/></p:column>
                                        </p:row>
                                    </p:panelGrid>
                                    <p:dataTable id="listMessages" var="i"
                                                 value="#{myInternshipBoardsCtrl.model.boardMessages}"
                                                 class="table table-bordered table-hover hide-column-names"
                                                 paginatorAlwaysVisible="false"
                                                 paginator="true"
                                                 paginatorPosition="bottom"
                                                 emptyMessage="Aucun message"
                                                 rows="20"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="20,50,100,200,1000"
                                            >

                                        <!--                                    <f:facet name="header">
                                                                                List
                                                                                <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="ui-icon-calculator" />
                                                                                <p:columnToggler datasource="cars" trigger="toggler" />
                                                                            </f:facet>-->
                                        <p:column headerText=""
                                                  style="border-left: 0px !important;border-right: 0px !important;width: 20%;">
                                            <p:outputLabel
                                                    value="#{vr.strcut(i.boardTeacher.teacher.contact.fullName, 50)}"/>
                                        </p:column>
                                        <p:column headerText=""
                                                  style="border-left: 0px !important;border-right: 0px !important;width: 70%;">
                                            <p:outputLabel value="#{i.privateObservations}"/>
                                        </p:column>
                                        <p:column headerText="" style="border-left: 0px !important;width: 10%;">
                                            <p:outputLabel value="#{vr.date(i.obsUpdateDate)}"/>
                                        </p:column>
                                        <p:column rendered="#{myInternshipBoardsCtrl.model.boardManager}"
                                                  headerText="" style="border-left: 0px !important;width: 10%;">
                                            <p:commandButton value="-"
                                                             actionListener="#{myInternshipBoardsCtrl.removeMessage(i.id)}"
                                                             update="listMessages"
                                                    />
                                        </p:column>
                                        <f:facet name="footer">
                                            <p:outputLabel
                                                    value="Total #{myInternshipBoardsCtrl.model.boardMessages.size()}"/>
                                        </f:facet>
                                    </p:dataTable>

                                    <div class="row" style="margin-top: 20px;margin-left: 20%;">
                                        <div class="table-responsive">
                                            <p:commandButton style="margin-left: 10px;"
                                                             rendered="#{myInternshipBoardsCtrl.model.internship ne null}"
                                                             value="Fermer" action="#{myInternshipBoardsCtrl.onClose}"
                                                             update=":listForm"/>
                                        </div>
                                    </div>
                                </p:tab>
                            </p:tabView>
                        </div>
                    </div>


                </ui:fragment>

            </h:form>


        </ui:define>


    </ui:composition>


</h:body>

</html>
