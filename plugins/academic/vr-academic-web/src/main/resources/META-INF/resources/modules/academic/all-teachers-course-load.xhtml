<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.

and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"

>

<h:head>
</h:head>

<h:body>


    <!--@elvariable id="vr" type="net.thevpc.app.vainruling.core.web.jsf.Vr"-->
    <!--@elvariable id="allTeachersCourseLoadCtrl" type="net.thevpc.app.vainruling.plugins.academic.web.load.AllTeachersCourseLoadCtrl"-->
    <!--@elvariable id="vrColorTable" type="net.thevpc.app.vainruling.core.web.VrColorTable"-->
    <ui:composition template="#{vr.privateTemplatePath}">
        <ui:define name="content">
            <h:form id="buttonsForm">
                <p:confirmDialog message="Etes vous sur de vouloir supprimer la selection ?" header="Suppression"
                                 widgetVar="confirmationDelete">
                    <p:commandButton value="Yes Sure" onclick="PF('confirmationDelete').hide();
                                processOnDeleteCurrent();"/>
                    <p:commandButton value="Not Yet" onclick="PF('confirmationDelete').hide()" type="button"/>
                </p:confirmDialog>

                <!-- /.row -->
                <!--                    <div >
                                        <p:outputLabel id="buttons">
                                            <p:commandButton value="Rafr." icon="ui-ribbonicon-refresh" styleClass="ui-ribbon-bigbutton " ajax="true" actionListener="# {allTeachersCourseLoadCtrl.onRefresh}"  update=":listForm"/>
                                        </p:outputLabel>
                                    </div>-->


                <!-- /.row -->
            </h:form>
            <h:form id="genForm">
                <p:growl id="growl" showDetail="true" sticky="true"/>
                <p:commandButton value="Génerer Charge" style="margin-right: 10px"
                                 actionListener="#{allTeachersCourseLoadCtrl.openGenerateDialog}"
                                 update="growl"/>
                <p:commandButton value="Copier Charge" actionListener="#{allTeachersCourseLoadCtrl.openCopyDialog}"
                                 update="growl"/>

                <p:separator/>


            </h:form>
            <h:form id="listForm">
                <p:fieldset legend="Filtres" toggleable="true" toggleSpeed="500">
                    <div>
                        <p:outputLabel value="Période" styleClass="vr-form-field vr-form-fixed-width-medium"/>
                        <p:selectOneMenu styleClass="vr-form-field"
                                         value="#{allTeachersCourseLoadCtrl.teacherFilter.model.selectedPeriod}"
                        >
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onChangePeriod}"
                                    update=":buttonsForm :listForm"/>
                            <f:selectItem itemLabel="Selectionner Période..." itemValue=""/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.teacherFilter.model.periodItems}"/>
                        </p:selectOneMenu>
                    </div>
                    <div>
                        <p:outputLabel value="Enseignant" styleClass="vr-form-field vr-form-fixed-width-medium"/>
                        <p:selectCheckboxMenu
                                styleClass="vr-form-field #{allTeachersCourseLoadCtrl.teacherFilter.model.selectedDepartments.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                value="#{allTeachersCourseLoadCtrl.teacherFilter.model.selectedDepartments}"
                                label="Departements"
                                filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                    update=":listForm :buttonsForm"/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.teacherFilter.model.departmentItems}"/>
                        </p:selectCheckboxMenu>

                        <p:selectCheckboxMenu
                                styleClass="vr-form-field #{allTeachersCourseLoadCtrl.teacherFilter.model.selectedDegrees.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                value="#{allTeachersCourseLoadCtrl.teacherFilter.model.selectedDegrees}"
                                label="Grades"
                                filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                    update=":listForm :buttonsForm"/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.teacherFilter.model.degreeItems}"/>
                        </p:selectCheckboxMenu>
                        <p:selectCheckboxMenu
                                styleClass="vr-form-field #{allTeachersCourseLoadCtrl.teacherFilter.model.selectedSituations.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                value="#{allTeachersCourseLoadCtrl.teacherFilter.model.selectedSituations}"
                                label="Situations"
                                filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                    update=":listForm :buttonsForm"/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.teacherFilter.model.situationItems}"/>
                        </p:selectCheckboxMenu>
                        <p:selectCheckboxMenu
                                styleClass="vr-form-field #{allTeachersCourseLoadCtrl.teacherFilter.model.selectedTeacherDisciplines.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                value="#{allTeachersCourseLoadCtrl.teacherFilter.model.selectedTeacherDisciplines}"
                                label="Disciplines"
                                filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                    update=":listForm :buttonsForm"/>
                            <f:selectItems
                                    value="#{allTeachersCourseLoadCtrl.teacherFilter.model.teacherDisciplineItems}"/>
                        </p:selectCheckboxMenu>
                    </div>
                    <div class="">
                        <p:outputLabel value="Modules"
                                       styleClass="vr-form-field vr-form-fixed-width-medium vr-form-indented-child"/>
                        <div class="vr-form-sub-rows">
                            <div class="vr-form-sub-row">
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedSemesters.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedSemesters}"
                                        label="Semestres"
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.semesterItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedProgramTypes.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedProgramTypes}"
                                        label="Type Formation"
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.programTypeItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedCourseTypes.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedCourseTypes}"
                                        label="Types Modules"
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.courseTypeItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedClasses.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedClasses}"
                                        label="Classes"
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems value="#{allTeachersCourseLoadCtrl.courseFilter.model.classItems}"/>
                                </p:selectCheckboxMenu>
                            </div>
                            <div class="vr-form-sub-row">
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedDepartments.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedDepartments}"
                                        label="Departement"
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.departmentItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedOwnerDepartments.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedOwnerDepartments}"
                                        label="Géré par..."
                                        filter="true" filterMatchMode="startsWith"
                                        panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.departmentItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedLabels.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedLabels}"
                                        label="Label"
                                        filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems value="#{allTeachersCourseLoadCtrl.courseFilter.model.labelItems}"/>
                                </p:selectCheckboxMenu>
                                <p:selectCheckboxMenu
                                        styleClass="vr-form-field #{allTeachersCourseLoadCtrl.courseFilter.model.selectedDeviationGroups.isEmpty() ?'':'vr-form-selected-many-selected'}"
                                        value="#{allTeachersCourseLoadCtrl.courseFilter.model.selectedDeviationGroups}"
                                        label="Groupe Balance"
                                        filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                    <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                            update=":listForm :buttonsForm"/>
                                    <f:selectItems
                                            value="#{allTeachersCourseLoadCtrl.courseFilter.model.deviationGroupItems}"/>
                                </p:selectCheckboxMenu>
                            </div>
                            <div class="vr-form-sub-row">
                                <div class="table-responsive">
                                    <p:selectManyCheckbox styleClass="vr-form-field"
                                                          value="#{allTeachersCourseLoadCtrl.courseFilter.model.refreshFilterSelected}"
                                                          layout="grid"
                                                          columns="5">
                                        <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}"
                                                update=":listForm :buttonsForm"/>
                                        <f:selectItems
                                                value="#{allTeachersCourseLoadCtrl.courseFilter.model.refreshFilterItems}"/>
                                    </p:selectManyCheckbox>
                                </div>
                            </div>
                            <div class="vr-form-sub-row">
                                <div class="table-responsive">
                                    <p:selectManyCheckbox styleClass="vr-form-field"
                                                          value="#{allTeachersCourseLoadCtrl.model.columnFilters}"
                                                          layout="grid"
                                                          columns="5">
                                        <p:ajax listener="#{allTeachersCourseLoadCtrl.onFiltersChanged}"
                                                update=":listForm :buttonsForm"/>
                                        <f:selectItems value="#{allTeachersCourseLoadCtrl.model.noRefreshFilterItems}"/>
                                    </p:selectManyCheckbox>
                                </div>
                            </div>
                        </div>
                    </div>

                </p:fieldset>
                <h1><p:outputLabel style="font-weight: bold"
                                   value="#{allTeachersCourseLoadCtrl.teacherFilter.period.name}"/>
                </h1>
                <ui:repeat value="#{allTeachersCourseLoadCtrl.model.tables}" var="tab">
                    <div >
                        <div class="table-responsive">
                            <h1>#{tab.title}</h1>
                            <p:dataTable id="tbl" var="i" value="#{tab.rows}"
                                         class="table table-bordered table-hover"
                                         paginatorAlwaysVisible="false"
                                         paginator="true"
                                         paginatorPosition="bottom"
                                         rows="1000"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
                                         rowsPerPageTemplate="1000,2000,5000,1000"
                                         emptyMessage="Aucune charge"
                                         sortMode=""
                            >

                                <f:facet name="{Exporters}">
                                    <h:commandLink>
                                        <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-xls16.png" width="16"/>
                                        <p:dataExporter type="xls" target="tbl" fileName="#{corePlugin.getPreferredFileName(tab.title)}" postProcessor="#{vr.postProcessDataExporterXLS}"/>
                                    </h:commandLink>

                                    <h:commandLink>
                                        <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-pdf16.png" width="16"/>
                                        <p:dataExporter type="pdf" target="tbl" fileName="#{corePlugin.getPreferredFileName(tab.title)}"/>
                                    </h:commandLink>

                                    <h:commandLink>
                                        <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-csv16.png" width="16"/>
                                        <p:dataExporter type="csv" target="tbl" fileName="#{corePlugin.getPreferredFileName(tab.title)}"/>
                                    </h:commandLink>

                                    <h:commandLink>
                                        <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-xml16.png" width="16"/>
                                        <p:dataExporter type="xml" target="tbl" fileName="#{corePlugin.getPreferredFileName(tab.title)}"/>
                                    </h:commandLink>
                                </f:facet>

                                <p:column headerText="Enseignant" width="10%" sortBy="#{i.teacher.user.fullName}">
                                    <h:outputText value="#{i.teacher.user.fullName}"/>
                                </p:column>

                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('degree')}"
                                          headerText="grade" width="5%" sortBy="#{i.teacherDegree.name}">
                                    <h:outputText value="#{i.teacher.degree.name}"/>
                                </p:column>
                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('situation')}"
                                          headerText="sit." width="5%" sortBy="#{i.teacherSituation.name}">
                                    <h:outputText value="#{i.teacher.situation.name}"/>
                                </p:column>
                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('discipline')}"
                                          headerText="discp." width="5%"
                                          sortBy="#{i.teacher.officialDiscipline.name}"
                                >
                                    <h:outputText value="#{i.teacher.officialDiscipline.name}"/>
                                </p:column>
                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('weeks')}"
                                          headerText="# sem." width="5%"
                                          sortBy="#{i.weeks}"
                                >
                                    <h:outputText value="#{i.weeks}"><f:convertNumber pattern="#0.#"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="du C" width="5%"
                                        style="background: #{vrColorTable.getBgColor('due')};"
                                        sortBy="#{i.due.c}"
                                >
                                    <h:outputText value="#{i.due.c != 0 ? i.due.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="du TD" width="5%"
                                        style="background: #{vrColorTable.getBgColor('due')};"
                                        sortBy="#{i.due.td}"
                                >
                                    <h:outputText value="#{i.due.td != 0 ? i.due.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <!--<p:column-->
                                <!--rendered="#_{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('tp')}"-->
                                <!--headerText="du TP" width="5%">-->
                                <!--<h:outputText value="#_{i.due.tp != 0 ? i.due.tp : ''}"><f:convertNumber-->
                                <!--pattern="#0.000"/></h:outputText>-->
                                <!--</p:column>-->
                                <!--<p:column-->
                                <!--rendered="#_{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('pm')}"-->
                                <!--headerText="du PM" width="5%">-->
                                <!--<h:outputText value="#_{i.due.pm != 0 ? i.due.pm : ''}"><f:convertNumber-->
                                <!--pattern="#_0.00"/></h:outputText>-->
                                <!--</p:column>-->
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="du Eq" width="5%"
                                        style="background: #{vrColorTable.getBgColor('due')};"
                                        sortBy="#{i.due.equiv}"
                                >
                                    <h:outputText value="#{i.due.equiv != 0 ? i.due.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.c}"
                                >
                                    <h:outputText value="#{i.value.c != 0 ? i.value.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="TD" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.td}"
                                >
                                    <h:outputText value="#{i.value.td != 0 ? i.value.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="TP" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.tp}"
                                >
                                    <h:outputText value="#{i.value.tp != 0 ? i.value.tp : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="PM" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.pm}"
                                >
                                    <h:outputText value="#{i.value.pm != 0 ? i.value.pm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="TP+PM" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.tppm}"
                                >
                                    <h:outputText value="#{i.value.tppm != 0 ? i.value.tppm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Eq" width="5%"
                                        style="background: #{vrColorTable.getBgColor('value')};"
                                        sortBy="#{i.value.equiv}"
                                >
                                    <h:outputText value="#{i.value.equiv != 0 ? i.value.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="Supp C" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extra')};"
                                        sortBy="#{i.extra.c}"
                                >
                                    <h:outputText value="#{i.extra.c != 0 ? i.extra.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="Supp TD" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extra')};"
                                        sortBy="#{i.extra.td}"
                                >
                                    <h:outputText value="#{i.extra.td != 0 ? i.extra.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="Supp TP" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extra')};"
                                        sortBy="#{i.extra.tp}"
                                >
                                    <h:outputText value="#{i.extra.tp != 0 ? i.extra.tp : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="Supp PM" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extra')};"
                                        sortBy="#{i.extra.tppm}"
                                >
                                    <h:outputText value="#{i.extra.tppm != 0 ? i.extra.tppm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Supp Eq" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extra')};"
                                        sortBy="#{i.extra.equiv}"
                                >
                                    <h:outputText value="#{i.extra.equiv != 0 ? i.extra.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C" width="5%"
                                        style="background: #{vrColorTable.getBgColor('dueWeek')};"
                                        sortBy="#{i.dueWeek.c}"
                                >
                                    <h:outputText value="#{i.dueWeek.c != 0 ? i.dueWeek.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="du TD/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('dueWeek')};"
                                        sortBy="#{i.dueWeek.td}"
                                >
                                    <h:outputText value="#{i.dueWeek.td != 0 ? i.dueWeek.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="du TP/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('dueWeek')};"
                                        sortBy="#{i.dueWeek.tp}"
                                >
                                    <h:outputText value="#{i.dueWeek.tp != 0 ? i.dueWeek.tp : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="du PM/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('dueWeek')};"
                                        sortBy="#{i.dueWeek.pm}"
                                >
                                    <h:outputText value="#{i.dueWeek.pm != 0 ? i.dueWeek.pm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="du Eq/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('dueWeek')};"
                                        sortBy="#{i.dueWeek.equiv}"
                                >
                                    <h:outputText
                                            value="#{i.dueWeek.equiv != 0 ? i.dueWeek.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.c}"
                                >
                                    <h:outputText value="#{i.valueWeek.c != 0 ? i.valueWeek.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="TD/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.td}"
                                >
                                    <h:outputText value="#{i.valueWeek.td != 0 ? i.valueWeek.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="TP/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.tp}"
                                >
                                    <h:outputText value="#{i.valueWeek.tp != 0 ? i.valueWeek.tp : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="PM/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.pm}"
                                >
                                    <h:outputText value="#{i.valueWeek.pm != 0 ? i.valueWeek.pm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="TP+PM/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.tppm}"
                                >
                                    <h:outputText
                                            value="#{i.valueWeek.tppm != 0 ? i.valueWeek.tppm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Eq/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('valueWeek')};"
                                        sortBy="#{i.valueWeek.equiv}"
                                >
                                    <h:outputText
                                            value="#{i.valueWeek.equiv != 0 ? i.valueWeek.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="supp C/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.c}"
                                >
                                    <h:outputText value="#{i.extraWeekEff.c != 0 ? i.extraWeekEff.c : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="supp TD/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.td}"
                                >
                                    <h:outputText value="#{i.extraWeekEff.td != 0 ? i.extraWeekEff.td : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="supp TP+PM/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.tppm}"
                                >
                                    <h:outputText value="#{i.extraWeekEff.tppm != 0 ? i.extraWeekEff.tppm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="supp TP/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.tp}"
                                >
                                    <h:outputText value="#{i.extraWeekEff.tp != 0 ? i.extraWeekEff.tp : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="supp PM/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.pm}"
                                >
                                    <h:outputText value="#{i.extraWeekEff.pm != 0 ? i.extraWeekEff.pm : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="supp Eq/sem" width="5%"
                                        style="background: #{vrColorTable.getBgColor('extraWeek')};"
                                        sortBy="#{i.extraWeekEff.equiv}"
                                >
                                    <h:outputText
                                            value="#{i.extraWeekEff.equiv != 0 ? i.extraWeekEff.equiv : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('average')}"
                                        headerText="moyenne" width="5%"
                                        style="background: #{vrColorTable.getBgColor('balance')};"
                                        sortBy="#{i.population.average}"
                                >
                                    <h:outputText
                                            value="#{i.population.average != 0 ? i.population.average : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('deviation')}"
                                        headerText="balance" width="5%"
                                        style="background: #{vrColorTable.getBgColor('balance')};"
                                        sortBy="#{i.deviation}"
                                >
                                    <h:outputText
                                            value="#{i.deviation != 0 ? i.deviation : ''}"><f:convertNumber
                                            pattern="#0.00%"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('deviation-graph')}"
                                        headerText="balance" width="5%"
                                        style="background: #{vrColorTable.getBgColor('balance')};"
                                        sortBy="#{i.deviation}"
                                >
                                    <div class="vr-progress-container" style="width: 100%;">
                                        <div class="#{i.deviationLabel}"
                                             style="width:#{vr.frame(vr.abs(i.deviation),0,1)*100}%">

                                        </div>
                                    </div>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('standard-deviation')}"
                                        headerText="ecart type" width="5%"
                                        style="background: #{vrColorTable.getBgColor('balance')};"
                                        sortBy="#{i.population.standardDeviation}"
                                >
                                    <h:outputText
                                            value="#{i.population.standardDeviation != 0 ? i.population.standardDeviation : ''}"><f:convertNumber
                                            pattern="#0.000"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('population')}"
                                        headerText="population" width="5%"
                                        style="background: #{vrColorTable.getBgColor('balance')};"
                                        sortBy="#{i.population.size}"
                                >
                                    <h:outputText
                                            value="#{i.population.size != 0 ? i.population.size : ''}"/>
                                </p:column>

                                <f:facet name="footer">
                                    <p:outputLabel value="Total #{editorCtrl.model.list.size()}"/>

                                    <div style="float: right;">
                                        <h:commandLink>
                                            <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-xls16.png"
                                                            width="16"/>
                                            <p:dataExporter type="xls" target="tbl"
                                                            fileName="#{corePlugin.getPreferredFileName(vr.strcat('all-teachers-load','-',tab.title))}"
                                                            postProcessor="#{vr.postProcessDataExporterXLS}"/>
                                        </h:commandLink>

                                        <h:commandLink>
                                            <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-pdf16.png"
                                                            width="16"/>
                                            <p:dataExporter type="pdf" target="tbl"
                                                            fileName="#{corePlugin.getPreferredFileName(vr.strcat('all-teachers-load','-',tab.title))}"/>
                                        </h:commandLink>

                                        <h:commandLink>
                                            <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-csv16.png"
                                                            width="16"/>
                                            <p:dataExporter type="csv" target="tbl"
                                                            fileName="#{corePlugin.getPreferredFileName(vr.strcat('all-teachers-load','-',tab.title))}"/>
                                        </h:commandLink>

                                        <h:commandLink>
                                            <p:graphicImage url="#{vr.privateThemePath}/images/icons/file-xml16.png"
                                                            width="16"/>
                                            <p:dataExporter type="xml" target="tbl"
                                                            fileName="#{corePlugin.getPreferredFileName(vr.strcat('all-teachers-load','-',tab.title))}"/>
                                        </h:commandLink>
                                    </div>
                                </f:facet>
                            </p:dataTable>
                        </div>

                    </div>
                </ui:repeat>
            </h:form>


        </ui:define>


    </ui:composition>


</h:body>

</html>
