<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.

and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"

      >

    <h:head>
    </h:head>

    <h:body>


        <!--@elvariable id="vr" type="net.thevpc.app.vainruling.core.web.jsf.Vr"-->
        <ui:composition template="#{vr.privateTemplatePath}">
            <ui:define name="content">
                <h:form id="buttonsForm">
                    <p:confirmDialog message="Etes vous sur de vouloir supprimer la selection ?" header="Suppression"
                                     widgetVar="confirmationDelete">
                        <p:commandButton value="Yes Sure" onclick="PF('confirmationDelete').hide();
                                processOnDeleteCurrent();"/>
                        <p:commandButton value="Not Yet" onclick="PF('confirmationDelete').hide()" type="button"/>
                    </p:confirmDialog>

                    <!-- /.row -->
                    <div >
                        <p:outputLabel id="buttons">
                            <p:commandButton value="Rafr." rendered="#{todoCtrl.isEnabledButton('Refresh')}"
                                             icon="a-refresh" styleClass="ui-ribbon-bigbutton btn btn-default vr-toolbox-button" ajax="true"
                                             actionListener="#{todoCtrl.onRefresh}" update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Nouv." rendered="#{todoCtrl.isEnabledButton('New')}" icon="fa fa-plus"
                                             styleClass="ui-ribbon-bigbutton  btn btn-primary" ajax="true"
                                             actionListener="#{todoCtrl.onNew}" update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Enregister" rendered="#{todoCtrl.isEnabledButton('Save')}"
                                             icon="ui-ribbonicon-save" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             ajax="true" onclick="processOnSaveCurrent()"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Supp." rendered="#{todoCtrl.isEnabledButton('Remove')}"
                                             icon="ui-ribbonicon-del" styleClass="ui-ribbon-bigbutton  btn btn-danger vr-toolbox-button"
                                             ajax="true" onclick="PF('confirmationDelete').show();"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Arch." rendered="#{todoCtrl.isEnabledButton('Archive')}"
                                             icon="ui-ribbonicon-arch" styleClass="ui-ribbon-bigbutto  btn btn-default vr-toolbox-button"
                                             ajax="true" onclick="processOnArchiveCurrent()"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Ann." rendered="#{todoCtrl.isEnabledButton('Cancel')}"
                                             icon="fa fa-arrow-left" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button" ajax="true"
                                             actionListener="#{todoCtrl.onCancelCurrent}"
                                             update="buttons :listForm :itemForm"/>

                            <p:commandButton value="Assigner." rendered="#{todoCtrl.isEnabledButton('Assign')}"
                                             icon="ui-ribbonicon-canc" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             ajax="true" actionListener="#{todoCtrl.onAssignCurrent}"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="De-Assigner." rendered="#{todoCtrl.isEnabledButton('Unassign')}"
                                             icon="ui-ribbonicon-canc" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             ajax="true" actionListener="#{todoCtrl.onUnassignCurrent}"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Fait" rendered="#{todoCtrl.isEnabledButton('Done')}"
                                             icon="ui-ribbonicon-canc" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             ajax="true" actionListener="#{todoCtrl.onDoneCurrent}"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="VÃ©rifier" rendered="#{todoCtrl.isEnabledButton('Verify')}"
                                             icon="ui-ribbonicon-canc" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             ajax="true" actionListener="#{todoCtrl.onVerifyCurrent}"
                                             update="buttons :listForm :itemForm"/>

                            <p:commandButton value="Copier" rendered="#{todoCtrl.isEnabledButton('Copy')}"
                                             icon="ui-ribbonicon-copy" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Coller" rendered="#{todoCtrl.isEnabledButton('Paste')}"
                                             icon="ui-ribbonicon-paste" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Couper" rendered="#{todoCtrl.isEnabledButton('Cut')}"
                                             icon="ui-ribbonicon-cut" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>

                            <p:commandButton value="Imprimer" rendered="#{todoCtrl.isEnabledButton('Print')}"
                                             icon="ui-ribbonicon-print" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>

                            <p:commandButton value="Importer" rendered="#{todoCtrl.isEnabledButton('Import')}"
                                             icon="ui-ribbonicon-import" styleClass="ui-ribbon-bigbutton  btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="csv" rendered="#{todoCtrl.isEnabledButton('Export-csv')}"
                                             icon="ui-ribbonicon-csv" styleClass="ui-ribbon-bigbutton   btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="xls" rendered="#{todoCtrl.isEnabledButton('Export-xls')}"
                                             icon="ui-ribbonicon-xls" styleClass="ui-ribbon-bigbutton   btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="pdf" rendered="#{todoCtrl.isEnabledButton('Export-pdf')}"
                                             icon="ui-ribbonicon-pdf" styleClass="ui-ribbon-bigbutton   btn btn-default vr-toolbox-button"
                                             update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Auth." rendered="#{todoCtrl.isEnabledButton('Authorization')}"
                                             icon="ui-ribbonicon-acl" styleClass="ui-ribbon-bigbutton   btn btn-default vr-toolbox-button"
                                             type="button" update="buttons :listForm :itemForm"/>
                            <p:commandButton value="Trace" rendered="#{todoCtrl.isEnabledButton('Log')}"
                                             icon="ui-ribbonicon-log" styleClass="ui-ribbon-bigbutton   btn btn-default vr-toolbox-button"
                                             type="button" update="buttons :listForm :itemForm"/>
                        </p:outputLabel>
                    </div>


                    <!-- /.row -->
                </h:form>
                <h:form id="listForm">
                    <p:outputLabel id="editItemList" rendered="#{todoCtrl.isListMode()}">


                        <div class="row">
                            <div class="col-lg-6">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">A Faire</h3>
                                    </div>
                                    <!-- /.box-header -->
                                    <!-- form start -->
                                    <div class="box-body">
                                        <p:dataTable var="i" value="#{todoCtrl.model.todo}"
                                                     class="table table-bordered table-hover"
                                                     paginatorAlwaysVisible="false"
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     rows="5"
                                                     emptyMessage="Aucune tÃ¢che"
                                                     >
                                            <p:column headerText="LibellÃ©">
                                                <p:commandLink ajax="true" actionListener="#{todoCtrl.onSelectCurrent}"
                                                               update=":buttonsForm :listForm :itemForm">
                                                    <!--<button type="button" class="btn btn-default btn-circle">-->
                                                    <i class="fa fa-list"></i>
                                                    <!--</button>-->
                                                    <f:setPropertyActionListener target="#{todoCtrl.model.current}"
                                                                                 value="#{i}"/>
                                                </p:commandLink>
                                                <h:outputText value="#{i.name}"/>
                                            </p:column>

                                            <p:column headerText="Cat" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;">
                                                <h:outputText escape="false" value="#{todoCtrl.getCategoryIconHtml(i.category)}"/>
                                            </p:column>

                                            <p:column headerText="De" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.initiator)}"/><h:outputText value="#{i.initiator.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Assign" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;"  rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.responsible)}"/><h:outputText value="#{i.responsible.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Echeance" style="width: 100px">
                                                <h:outputText value="#{i.deadline}">
                                                    <f:convertDateTime type="date" pattern="dd-MM-yy"/>
                                                </h:outputText>
                                            </p:column>

                                            <p:column headerText="PrioritÃ©" style="width: 100px">
                                                <i class="fa fa-circle-o text-#{i.priority.ordinal()==0?'blue':i.priority.ordinal()==1?'light-blue':i.priority.ordinal()==2?'green':i.priority.ordinal()==3?'aqua':i.priority.ordinal()==4?'orange':i.priority.ordinal()==5?'red':'grey'}">
                                                </i>#{vr.str(i.priority)}
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <!-- /.box-body -->

                                    <div class="box-footer">
                                        <p:outputLabel value="Total #{todoCtrl.model.todo.size()}"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">En cours</h3>
                                    </div>
                                    <!-- /.box-header -->
                                    <!-- form start -->
                                    <div class="box-body">
                                        <p:dataTable var="i" value="#{todoCtrl.model.inProgress}"
                                                     class="table table-bordered table-hover"
                                                     paginatorAlwaysVisible="false"
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     rows="5"
                                                     emptyMessage="Aucune tÃ¢che"
                                                     >
                                            <p:column headerText="LibellÃ©">
                                                <p:commandLink ajax="true" actionListener="#{todoCtrl.onSelectCurrent}"
                                                               update=":buttonsForm :listForm :itemForm">
                                                    <!--<button type="button" class="btn btn-default btn-circle">-->
                                                    <i class="fa fa-list"></i>
                                                    <!--</button>-->
                                                    <f:setPropertyActionListener target="#{todoCtrl.model.current}"
                                                                                 value="#{i}"/>
                                                </p:commandLink>
                                                <h:outputText value="#{i.name}"/>
                                            </p:column>

                                            <p:column headerText="Cat" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;">
                                                <h:outputText escape="false" value="#{todoCtrl.getCategoryIconHtml(i.category)}"/>
                                            </p:column>

                                            <p:column headerText="De" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.initiator)}"/><h:outputText value="#{i.initiator.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Assign" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.responsible)}"/><h:outputText value="#{i.responsible.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Echeance" style="width: 70px">
                                                <h:outputText value="#{i.deadline}">
                                                    <f:convertDateTime type="date" pattern="dd-MM-yy"/>
                                                </h:outputText>
                                            </p:column>

                                            <p:column headerText="Avanc." style="width: 100px">
                                                <!--<p:progressBar value="# {i.progress}" labelTemplate="{value}%" styleClass="animated" global="false"/>-->
                                                <div class="progress progress-striped active">
                                                    #{i.progress}%
                                                    <div class="progress-bar #{i.priority.ordinal()==0?'progress-bar-default':i.priority.ordinal()==1?'progress-bar-primary':i.priority.ordinal()==2?'progress-bar-success':i.priority.ordinal()==3?'progress-bar-info':i.priority.ordinal()==4?'progress-bar-warning':i.priority.ordinal()==5?'progress-bar-danger':'progress-bar-link'}"
                                                         role="progressbar" aria-valuenow="40" aria-valuemin="0"
                                                         aria-valuemax="100" style="width: #{i.progress le 10?10:i.progress}%">
                                                        <span class="sr-only">#{i.progress}%</span>
                                                    </div>
                                                </div>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <!-- /.box-body -->

                                    <div class="box-footer">
                                        <p:outputLabel value="Total #{todoCtrl.model.inProgress.size()}"/>
                                    </div>
                                </div>                                

                            </div>
                        </div>
                        <!-- /.row -->

                        <div class="row">
                            <div class="col-lg-6">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">A vÃ©rifier</h3>
                                    </div>
                                    <!-- /.box-header -->
                                    <!-- form start -->
                                    <div class="box-body">
                                        <p:dataTable var="i" value="#{todoCtrl.model.toVerify}"
                                                     class="table table-bordered table-hover"
                                                     paginatorAlwaysVisible="false"
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     rows="5"
                                                     emptyMessage="Aucune tÃ¢che"
                                                     >
                                            <p:column headerText="LibellÃ©">
                                                <p:commandLink ajax="true" actionListener="#{todoCtrl.onSelectCurrent}"
                                                               update=":buttonsForm :listForm :itemForm">
                                                    <!--<button type="button" class="btn btn-default btn-circle">-->
                                                    <i class="fa fa-list"></i>
                                                    <!--</button>-->
                                                    <f:setPropertyActionListener target="#{todoCtrl.model.current}"
                                                                                 value="#{i}"/>
                                                </p:commandLink>
                                                <h:outputText value="#{i.name}"/>
                                            </p:column>

                                            <p:column headerText="Cat" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;">
                                                <h:outputText escape="false" value="#{todoCtrl.getCategoryIconHtml(i.category)}"/>
                                            </p:column>

                                            <p:column headerText="De" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.initiator)}"/><h:outputText value="#{i.initiator.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Assign" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.responsible)}"/><h:outputText value="#{i.responsible.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Echeance" style="width: 70px">
                                                <h:outputText value="#{i.deadline}">
                                                    <f:convertDateTime type="date" pattern="dd-MM-yy"/>
                                                </h:outputText>
                                            </p:column>


                                            <p:column headerText="Avanc." style="width: 100px">
                                                <!--<p:progressBar value="# {i.progress}" labelTemplate="{value}%" styleClass="animated" global="false"/>-->
                                                <div class="progress progress-striped active">
                                                    <div class="progress-bar #{i.priority.ordinal()==0?'progress-bar-default':i.priority.ordinal()==1?'progress-bar-primary':i.priority.ordinal()==2?'progress-bar-success':i.priority.ordinal()==3?'progress-bar-info':i.priority.ordinal()==4?'progress-bar-warning':i.priority.ordinal()==5?'progress-bar-danger':'progress-bar-link'}"
                                                         role="progressbar" aria-valuenow="40" aria-valuemin="0"
                                                         aria-valuemax="100" style="width: #{i.progress le 10?10:i.progress}%">
                                                        <span class="sr-only">#{i.progress}%</span>
                                                    </div>
                                                </div>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <!-- /.box-body -->

                                    <div class="box-footer">
                                        <p:outputLabel value="Total #{todoCtrl.model.toVerify.size()}"/>
                                    </div>
                                </div>

                            </div>
                            <div class="col-lg-6">
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">TerminÃ©e</h3>
                                    </div>
                                    <!-- /.box-header -->
                                    <!-- form start -->
                                    <div class="box-body">
                                        <p:dataTable var="i" value="#{todoCtrl.model.done}"
                                                     class="table table-bordered table-hover"
                                                     paginatorAlwaysVisible="false"
                                                     paginator="true"
                                                     paginatorPosition="bottom"
                                                     rows="5"
                                                     emptyMessage="Aucune tÃ¢che"
                                                     >
                                            <p:column headerText="LibellÃ©">
                                                <p:commandLink ajax="true" actionListener="#{todoCtrl.onSelectCurrent}"
                                                               update=":buttonsForm :listForm :itemForm">
                                                    <!--<button type="button" class="btn btn-default btn-circle">-->
                                                    <i class="fa fa-list"></i>
                                                    <!--</button>-->
                                                    <f:setPropertyActionListener target="#{todoCtrl.model.current}"
                                                                                 value="#{i}"/>
                                                </p:commandLink>
                                                <h:outputText value="#{i.name}"/>
                                            </p:column>

                                            <p:column headerText="Cat" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;">
                                                <h:outputText escape="false" value="#{todoCtrl.getCategoryIconHtml(i.category)}"/>
                                            </p:column>

                                            <p:column headerText="De" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.initiator)}"/><h:outputText value="#{i.initiator.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Assign" style="width: 70px;padding: 0 0 0 2px;overflow:hidden;" rendered="#{todoCtrl.model.todoList.sharableList}">
                                                <h:outputText escape="false" value="#{todoCtrl.getUserTextIconHtml(i.responsible)}"/><h:outputText value="#{i.responsible.firstName}"/>
                                            </p:column>

                                            <p:column headerText="Echeance" style="width: 70px">
                                                <h:outputText value="#{i.deadline}">
                                                    <f:convertDateTime type="date" pattern="dd-MM-yy"/>
                                                </h:outputText>
                                            </p:column>

                                            <p:column headerText="Avanc." style="width: 100px">
                                                <!--<p:progressBar value="# {i.progress}" labelTemplate="{value}%" styleClass="animated" global="false"/>-->
                                                <div class="progress progress-striped active">
                                                    <div class="progress-bar #{i.priority.ordinal()==0?'progress-bar-default':i.priority.ordinal()==1?'progress-bar-primary':i.priority.ordinal()==2?'progress-bar-success':i.priority.ordinal()==3?'progress-bar-info':i.priority.ordinal()==4?'progress-bar-warning':i.priority.ordinal()==5?'progress-bar-danger':'progress-bar-link'}"
                                                         role="progressbar" aria-valuenow="40" aria-valuemin="0"
                                                         aria-valuemax="100" style="width: #{i.progress le 10?10:i.progress}%">
                                                        <span class="sr-only">#{i.progress}%</span>
                                                    </div>
                                                </div>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <!-- /.box-body -->

                                    <div class="box-footer">
                                        <p:outputLabel value="Total #{todoCtrl.model.done.size()}"/>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <h:panelGroup layout="block" styleClass="box box-primary" rendered="#{todoCtrl.sharableList}">
                            <div class="box-header with-border">
                                <h3 class="box-title">Partage</h3>
                            </div>
                            <!-- /.box-header -->
                            <!-- form start -->
                            <div class="box-body">
                                <h:panelGroup layout="block" styleClass="col-lg-6" rendered="#{todoCtrl.listManager}">
                                    <div class="form-group">
                                        <label>Collaborateurs</label>
                                        <p:autoComplete id="tprofileexpr"
                                                        styleClass="vr-form-control vr-form-control"
                                                        placeholder="" value="#{todoCtrl.model.todoList.collaborators}"
                                                        completeMethod="#{vr.autoCompleteProfileExpression}"
                                                        queryDelay="1000"
                                                        >
                                        </p:autoComplete>
                                        <!--<p class="help-block">Le titre de l'action Ã  afficher.</p>-->
                                    </div>

                                </h:panelGroup>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label>Liste des Collaborateurs</label>
                                        <p:selectOneMenu style="width: 100%">
                                            <f:selectItems value="#{todoCtrl.model.responsibleItems}"/>
                                        </p:selectOneMenu>
                                        <!--<p class="help-block">Le titre de l'action Ã  afficher.</p>-->
                                    </div>
                                </div>
                            </div>
                            <!-- /.box-body -->

                            <div class="box-footer">
                                <p:commandButton value="Partager" update="listForm" styleClass="btn btn-primary"
                                                 actionListener="#{todoCtrl.onUpdateCollaborators()}" 
                                                 />
                            </div>
                        </h:panelGroup>

                    </p:outputLabel>
                </h:form>

                <h:form id="itemForm" enctype="multipart/form-data">
                    <h:panelGroup layout="block" styleClass="row" rendered="#{todoCtrl.isNewOrUpdateMode()}">
                        <div class="col-lg-6">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Todo</h3>
                                </div>
                                <!-- /.box-header -->
                                <!-- form start -->
                                <div class="box-body">
                                    <div class="form-group">
                                        <label>Titre</label>
                                        <p:inputText value="#{todoCtrl.model.current.name}" styleClass="form-control"/>
                                        <!--<p class="help-block">Le titre de l'action Ã  afficher.</p>-->
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <p:inputTextarea styleClass="form-control" rows="8" value="#{todoCtrl.model.current.description}" />
                                    </div>

                                    <div class="form-group">
                                        <label>Attachements</label>
                                        <input type="file"/>
                                    </div>
                                    <p:dataList var="car" type="unordered" itemType="none" paginator="true" rows="10"
                                                styleClass="paginated"
                                                paginatorPosition="bottom"
                                                paginatorAlwaysVisible="false"
                                                emptyMessage=""
                                                >
                                        <!--                                            <f:facet name="header">
                                                                                        Paginator
                                                                                    </f:facet>-->
                                        <!--                                            <p:commandLink update=":form:carDetail" oncomplete="PF('carDialog').show()" title="View Detail" styleClass="ui-icon ui-icon-search" style="float:left;margin-right:10px">
                                                                                        <f:setPropertyActionListener value="# {car}" target="# {dataListView.selectedCar}" />
                                                                                        <h:outputText value="# {car.brand}, # {car.year}" />
                                                                                    </p:commandLink>
                                                                                    <h:outputText value="# {car.brand}, # {car.year}" style="display:inline-block"/>-->
                                    </p:dataList>
                                </div>
                                <!-- /.box-body -->

                                <div class="box-footer">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title">DÃ©tails</h3>
                                </div>
                                <!-- /.box-header -->
                                <!-- form start -->
                                <div class="box-body">
                                    <div class="form-group">
                                        <label>CrÃ©Ã©e par</label><p:spacer width="30" height="10"/>
                                        <p:inputText value="#{todoCtrl.model.current.initiator.fullName}" disabled="true" styleClass="form-control"/>
                                    </div>
                                    <div class="form-group">
                                        <label>EchÃ©ance</label><p:spacer width="30" height="10"/>
                                        <p:calendar 
                                            style="margin-left: 5px;margin-top: 5px" inputStyleClass="form-control"
                                            value="#{todoCtrl.model.current.deadline}"
                                            pattern="MM/dd/yyyy HH:mm:ss">
                                            <f:converter converterId="TimestampConverter"/>
                                        </p:calendar>
                                    </div>
                                    <div class="form-group">
                                        <label>CatÃ©gorie</label>
                                        <p:autoComplete id="themeCustom" minQueryLength="1" value="#{todoCtrl.model.currentCategoryName}" 
                                                        inputStyleClass="form-control" styleClass="form-control vr-auto-complete"
                                                        inputStyle="width: 95%;display: inline;"
                                                        dropdown="true" completeMethod="#{todoCtrl.onCompleteCategory}" style="display: block"
                                                        >
                                        </p:autoComplete>

                                    </div>
                                    <div class="form-group">
                                        <label>ComplexitÃ© :</label>
                                        <p:inputText disabled="true" id="estimationField" value="#{todoCtrl.model.current.estimation}" styleClass="form-control"/>
                                        <p:slider minValue="1" maxValue="24" for="estimationField">
                                            <p:ajax event="slideEnd" listener="#{todoCtrl.onEstimationSlideEnd}" update="estimationField" />                                            
                                        </p:slider>
                                        <!--<p class="help-block">Le titre de l'action Ã  afficher.</p>-->
                                    </div>
                                    <div class="form-group">
                                        <label>PrioritÃ© :</label>
                                        <p:inputText disabled="true" id="priorityField" value="#{vr.str(vr.str(todoCtrl.model.current.priority))}" styleClass="form-control"/>
                                        <p:slider minValue="0" maxValue="5" for="priorityFieldHidden" >
                                            <p:ajax event="slideEnd" listener="#{todoCtrl.onPrioritySlideEnd}" update="priorityFieldHidden priorityField progressPanel" />
                                        </p:slider>
                                        <h:inputHidden id="priorityFieldHidden" value="#{todoCtrl.model.currentPriority}"/>
                                    </div>
                                    <ui:fragment  rendered="#{todoCtrl.model.todoList.sharableList}">
                                        <div class="form-group">
                                            <label>AssignÃ©e Ã </label>
                                            <p:selectOneMenu value="#{todoCtrl.model.currentResponsibleId}" style="width: 100%">
                                                <f:selectItems value="#{todoCtrl.model.responsibleItems}"/>
                                            </p:selectOneMenu>
                                        </div>
                                    </ui:fragment>
                                    <p:outputPanel rendered="#{!todoCtrl.isNewMode()}">
                                        <div class="form-group">
                                            <label>Etat</label>
                                            <p:selectOneMenu value="#{todoCtrl.model.currentStatusId}" style="width: 100%">
                                                <f:selectItems value="#{todoCtrl.model.statusItems}"/>
                                            </p:selectOneMenu>
                                        </div>
                                        <div class="form-group">
                                            <label>Progression (%)</label>
                                            <p:inputText id="progressField" value="#{todoCtrl.model.current.progress}" styleClass="form-control"/>
                                            <h:panelGroup layout="block" styleClass="progress progress-striped active" id="progressPanel">
                                                <div class="progress-bar #{todoCtrl.model.current.priority.ordinal()==0?'progress-bar-default':todoCtrl.model.current.priority.ordinal()==1?'progress-bar-primary':todoCtrl.model.current.priority.ordinal()==2?'progress-bar-success':todoCtrl.model.current.priority.ordinal()==3?'progress-bar-info':todoCtrl.model.current.priority.ordinal()==4?'progress-bar-warning':todoCtrl.model.current.priority.ordinal()==5?'progress-bar-danger':'progress-bar-link'}"
                                                     role="progressbar" aria-valuenow="40" aria-valuemin="0"
                                                     aria-valuemax="100"
                                                     style="width: #{todoCtrl.model.current.progress le 10?10:todoCtrl.model.current.progress}%">
                                                    <span class="sr-only">#{todoCtrl.model.current.progress}%</span>
                                                </div>
                                            </h:panelGroup>
                                            <h:inputHidden id="progressFieldHidden" value="#{todoCtrl.model.current.progress}"/>
                                            <p:slider minValue="0" maxValue="100" for="progressFieldHidden" >
                                                <p:ajax event="slideEnd" listener="#{todoCtrl.onProgressSlideEnd}" update="progressPanel progressField progressFieldHidden" />
                                            </p:slider>
                                        </div>
                                        <div class="form-group">
                                            <label>Consommation</label>
                                            <p:inputText value="#{todoCtrl.model.current.consumption}" id="consumptionField"
                                                         styleClass="form-control"/>
                                            <!--<p class="help-block">Le titre de l'action Ã  afficher.</p>-->
                                            <h:panelGrid columns="6">
                                                <p:commandButton styleClass="form-control" value="+0.25" update="consumptionField" 
                                                                 actionListener="#{todoCtrl.onAddConsumption(0.25)}" 
                                                                 />
                                                <p:commandButton styleClass="form-control" value="+0.5" update="consumptionField"
                                                                 actionListener="#{todoCtrl.onAddConsumption(0.5)}" 
                                                                 />
                                                <p:commandButton styleClass="form-control" value="+1" update="consumptionField"
                                                                 actionListener="#{todoCtrl.onAddConsumption(1)}" 
                                                                 />
                                                <p:commandButton styleClass="form-control" value="-1" update="consumptionField"
                                                                 actionListener="#{todoCtrl.onAddConsumption(-1)}" 
                                                                 />
                                                <p:commandButton styleClass="form-control" value="-0.5" update="consumptionField"
                                                                 actionListener="#{todoCtrl.onAddConsumption(-0.5)}" 
                                                                 />
                                                <p:commandButton styleClass="form-control" value="-0.25" update="consumptionField"
                                                                 actionListener="#{todoCtrl.onAddConsumption(-0.25)}" 
                                                                 />
                                            </h:panelGrid>
                                        </div>
                                    </p:outputPanel>
                                </div>
                                <!-- /.box-body -->

                                <div class="box-footer">
                                </div>
                            </div>

                        </div>
                        <!-- /.row (nested) -->
                        <p:remoteCommand name="processOnSaveCurrent" process="@form" update=":listForm :itemForm"
                                         action="#{todoCtrl.onSaveCurrent()}"/>
                        <p:remoteCommand name="processOnDeleteCurrent" process="@form" update=":listForm :itemForm"
                                         action="#{todoCtrl.onDeleteCurrent()}"/>
                        <p:remoteCommand name="processOnArchiveCurrent" process="@form" update=":listForm :itemForm"
                                         action="#{todoCtrl.onArchiveCurrent()}"/>
                        <p:remoteCommand name="processOnCancelCurrent" process="@form" update=":listForm :itemForm"
                                         action="#{todoCtrl.onCancelCurrent()}"/>
                    </h:panelGroup>
                </h:form>

            </ui:define>


        </ui:composition>


    </h:body>

</html>
